# LLM 기반 수학 수업 지도안 자동 생성기 PRD

## 1. 개요 (Overview)

본 문서는 RAG(Retrieval-Augmented Generation)와 LoRA(Low-Rank Adaptation) 기술을 활용한 **LLM 기반 수학 수업 지도안 자동 생성기** 개발을 위한 제품 요구사항 명세서(PRD)입니다. 시스템은 교사의 수업 준비 부담을 줄이고, 개정 교육과정에 맞춘 고품질 지도안을 신속하게 생성하는 것을 목표로 합니다.

사용자는 간단한 인터페이스에서 학년, 단원, 차시 등 기본 정보를 입력하며, 시스템은 내장된 교육과정 데이터를 바탕으로 맞춤형 지도안 초안을 제공합니다.

## 2. 목표 및 비전 (Goals & Vision)

### 2.1 핵심 목표 (Problem)

- 교사들이 매 차시 수업 지도안을 작성하는 데 소요되는 과도한 시간과 노력을 절감합니다.
- 개정 교육과정의 복잡한 요구사항과 성취 기준을 일관되게 반영하도록 지원합니다.
- 신규 교사나 특정 단원에 익숙하지 않은 교사도 표준화된 고품질 지도안을 확보하도록 돕습니다.

### 2.2 제품 비전 (Solution)

- **신속성:** 1분 이내에 교육과정과 연계된 지도안 초안을 생성합니다.
- **정확성 (RAG):** 교사용 지도서, 교육과정, 우수 예시안을 RAG로 검색하여 사실성과 전문성을 확보합니다.
- **일관성 (LoRA):** LoRA 모델을 활용해 생성된 초안을 표준 지도안 템플릿 형식으로 정제합니다.
- **순환적 개선 (Feedback Loop):** 사용자 평가 데이터를 수집해 RAG DB와 LoRA 모델을 지속적으로 개선합니다.

## 3. 대상 사용자 (Target Audience)

- **주요 사용자:** 초·중·고등학교 수학 교사
- **보조 사용자:** 예비 교사(교육 실습생), 교육 연구원, 장학사 등

## 4. 핵심 기능 (Core Features)

### F1. 수업 조건 설정 인터페이스 (User Input UI)

- 학년, 대단원, 중단원, 소단원, 차시 선택/입력 기능 제공
- 생성하기 버튼 및 선택적 고급 설정 제공

### F2. RAG 기반 교육과정 컨텍스트 검색

- Vector DB에 저장된 교육과정, 교사용 지도서, 예시안 데이터를 검색
- 사용자 입력 조건을 기반으로 관련성이 높은 문서를 컨텍스트로 추출

### F3. LLM 기반 지도안 초안 생성

- RAG 컨텍스트와 사용자 입력을 조합해 Base LLM에게 지도안 초안을 생성하도록 지시
- 구조화되지 않은 Raw Draft 생성

### F4. LoRA 기반 템플릿 정제 및 출력

- LoRA 미세조정 모델로 Raw Draft를 표준 템플릿 구조(도입, 전개, 정리 등)에 맞게 정제
- 형식이 완비된 최종 지도안 산출

### F5. 결과 출력 및 수정 인터페이스

- 정제된 지도안을 리치 텍스트 에디터로 표시하고 즉시 수정, 복사, 다운로드(HWP, PDF, TXT)를 지원

### F6. 순환적 개선을 위한 피드백 수집 (Feedback Loop)

- 만족도 별점(1~5점)과 선택적 코멘트 입력을 제공
- 피드백 DB에 저장하여 RAG DB 튜닝 및 LoRA 재학습에 활용

## 5. 기술 아키텍처 (High-Level Architecture)

```
[사용자 (교사)]
     |
     V
[1. 프론트엔드 (Web UI)]
     |
     V
[2. 백엔드 API 서버]
     |
     +-----> [3. RAG 모듈]
     |         |
     |         V
     |       [Vector DB]
     |         |
     |         V (검색된 컨텍스트)
     |
     +-----> [4. LLM 생성 모듈]
               |-- (A) Base LLM (초안 생성)
               |-- (B) LoRA 모델 (템플릿 정제)
               V (최종 지도안)
```

피드백 수집 UI를 통해 별점과 코멘트를 취합하며, 피드백 DB는 RAG/LoRA 개선 루프를 지원합니다.

## 6. UI/UX 스케치 (Wireframes)

### 6.1 메인 화면 (조건 입력)

```
+-----------------------------------------------------+
|  [로고] LLM 기반 수학 수업 지도안 생성기            |
+-----------------------------------------------------+
|                                                     |
|  ## 📝 어떤 수업을 준비하시나요?                    |
|                                                     |
|  [ 학년 선택 ]   [ ▼ ]  (예: 중학교 1학년)         |
|  [ 대단원 선택 ] [ ▼ ]  (예: I. 수와 연산)         |
|  [ 중단원 선택 ] [ ▼ ]  (예: 1. 소인수분해)        |
|  [ 소단원 선택 ] [ ▼ ]  (예: (1) 거듭제곱)         |
|  [ 차시 입력 ]   [ 1 / 12 ] (차시)                 |
|  [ 고급 설정 (선택) ] (예: 활동 중심, 문제 풀이 중심) |
|                    [ 🚀 지도안 생성하기 ]           |
+-----------------------------------------------------+
```

### 6.2 결과 화면 (출력 및 피드백)

```
+-----------------------------------------------------+
|  [로고] ...           [ 🏠 새로 만들기 ]           |
+-----------------------------------------------------+
|                                                     |
|  ## 💡 지도안이 생성되었습니다! (수정 가능)          |
|                                                     |
|  +-- [수업 지도안: 중1 수학 - I. 수와 연산 (1/12) ] --+
|  |                                                 |
|  |  **단원:** I. 수와 연산 > 1. 소인수분해           |
|  |  **주제:** 거듭제곱의 뜻 알기                   |
|  |  **성취기준:** [7수01-01] ...                  |
|  |                                                 |
|  |  **[도입] (5분)**                               |
|  |  * 지난 차시 학습 내용 확인                      |
|  |  * 흥미 유발: "2를 10번 곱하면?"               |
|  |                                                 |
|  |  **[전개] (30분)**                              |
|  |  * 거듭제곱의 정의 설명                         |
|  |  * 모둠별 카드 게임 활동                        |
|  |                                                 |
|  |  ... (편집 가능한 텍스트 영역) ...               |
|  +-------------------------------------------------+
|  | [ 📥 HWP ]  [ 📥 PDF ]  [ 📋 복사 ]               |
|                                                     |
|  --- (피드백 섹션) ---                               |
|  이 지도안이 도움이 되었나요? (만족도)              |
|      [ ⭐ ] [ ⭐ ] [ ⭐ ] [ ⭐ ] [ ☆ ]                |
|  [ (선택) 개선점을 알려주세요... ]                  |
|                         [ 피드백 제출 ]             |
+-----------------------------------------------------+
```

## 7. 성공 지표 (Success Metrics)

- **품질:** 생성된 지도안의 평균 사용자 만족도 (목표: 4.0/5.0 이상)
- **활성도:** 일간/주간 활성 사용자 수 (DAU/WAU)
- **효율성:** 생성 후 복사 또는 다운로드까지의 평균 시간(낮을수록 좋음)
- **커버리지:** DB에 저장된 교육과정 단원 대비 지도안 생성 요청 비율

## 8. 향후 로드맵 (Future Roadmap)

- **V1.1:** 피드백 기반 LoRA 재학습 자동화
- **V1.2:** 활동 아이디어, 형성평가 문항 별도 생성 기능 추가
- **V2.0:** 타 과목(과학, 사회 등)으로 서비스 확장
- **V2.1:** 사용자 정의 LoRA 템플릿 생성 기능

---

# 구조 보완 제안 (Enhancement Recommendations)

## 1. 데이터 관리 및 파이프라인 강화

- Vector DB 구축·업데이트 절차를 정의하고, 교육과정/지도서/예시안 데이터의 출처, 버전, 저작권을 명시합니다.
- 데이터 정제 규칙과 메타데이터 스키마를 설계하고, 임베딩 전략과 재생성 빈도를 설정합니다.

## 2. 모델 운용 전략 구체화

- Base LLM 선정 기준, LoRA 파라미터(랭크, α 등)를 문서화하고 재학습 파이프라인을 정의합니다.
- 모델 평가 지표(정확도, 스타일 일치도 등)와 휴먼 검수 절차를 포함합니다.

## 3. 기술적 요구사항 확장

- 응답 시간, 동시 접속 처리량 등 비기능 요구사항(SLA)을 설정합니다.
- 인증·인가, 데이터 암호화, 접근 제어 등 보안 요구사항을 명시합니다.
- 로깅, 모니터링, 알림 체계를 설계합니다.

## 4. 피드백 활용 로직 명세

- 만족도 별점과 코멘트를 어떻게 라벨링해 RAG/LoRA 개선에 반영할지 기준을 수립합니다.
- 저품질 피드백에 대한 휴먼 리뷰 또는 반자동 검토 프로세스를 도입합니다.

## 5. QA 및 검증 계획 수립

- 기능 테스트, UX 테스트, 모델 품질 검증을 위한 절차와 책임자를 정의합니다.
- 자동화 테스트 도입 여부, 테스트 데이터셋 구성 방안을 문서화합니다.

## 6. 로드맵 세분화

- 향후 버전을 에픽/스토리 단위로 분해하고 필요한 리소스(데이터, 인력, 인프라)를 추정합니다.
- 우선순위와 의존 관계를 명확히 하여 실행 가능한 배포 계획을 마련합니다.
