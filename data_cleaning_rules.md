# RAG/LoRA 데이터 정제 규칙 예시

본 문서는 2022 교육과정, 교사용 지도서, 지도안 예시 데이터를 RAG와 LoRA 학습에 활용하기 위한 구체적인 정제 규칙 예시를 제시합니다.

## 1. 공통 전처리 규칙
- **인코딩/포맷 통일**: 모든 원문을 UTF-8, Markdown/JSONL로 변환하고, 표·도형은 텍스트로 서술하여 손실을 최소화합니다.[^encoding]
- **중복/불용 정보 제거**: 표지, 목차, 각주·미주, 페이지 번호, 스캔 워터마크 등 검색 품질을 저하시키는 메타 요소를 제거합니다.
- **문단 단위 정규화**: 제목 계층(H1~H4), 목록, 표를 구조화하고 문단 길이를 256~512토큰으로 분할하여 검색과 프롬프트 삽입을 용이하게 합니다.
- **정확도 검수**: OCR나 수식 변환 결과를 표본 검사하여 오탈자·수식 깨짐을 수정하고, 원문 대비 정합성을 확인합니다.
- **민감정보 필터링**: 교사/학생 실명, 학교명, 연락처 등 개인 식별 가능 정보(PII)를 익명화하거나 제거합니다.[^privacy]
- **저작권 메타데이터 부착**: 출처, 발행연도, 저작권 상태, 이용 허락 범위를 메타 필드로 기록합니다.[^copyright]

## 2. 데이터 원본별 정제 규칙
### 2.1 2022 교육과정
- **성취기준 보존**: 성취기준 코드(예: [7수01-01])와 전문을 원문 그대로 보존하고, 코드 기준으로 청크를 나눕니다.
- **요소 분리**: "핵심 개념", "학습 요소", "평가 기준"을 별도 필드로 분리해 검색 시 필터링이 가능하도록 만듭니다.
- **표준 용어 통일**: 용어집을 만들어 동일 개념(예: 거듭제곱/제곱)을 하나의 표준어로 정규화합니다.
- **정책/법령 레이블링**: 법령·고시 인용문은 `policy:true` 메타 태그를 추가하여 우선 검색 또는 제약 준수에 활용합니다.

### 2.2 교사용 지도서
- **구조 보존**: "단원 개요", "지도상의 유의점", "수업 모형", "형성평가" 등 섹션을 유지한 채로 청크화해 컨텍스트 손실을 최소화합니다.
- **활동/자료 추출**: 활동 절차, 준비물, 예상 오답/피드백 문구를 별도 필드로 추출해 생성 시 바로 활용하도록 합니다.
- **정답/해설 구분**: 문제 본문과 정답/해설을 분리 저장하여, 생성 시 노출 여부를 제어할 수 있게 합니다.
- **학교·교사 사례 익명화**: 실명으로 제시된 수업 사례는 역할(예: "A교사")로 치환합니다.

### 2.3 지도안 예시
- **템플릿 라벨링**: 도입/전개/정리/형성평가/과제 등 템플릿 섹션을 명시적으로 라벨링해 LoRA가 형식을 학습하도록 합니다.
- **시간/자료 슬롯 표준화**: 각 활동의 소요 시간, 교구/자료, 운영 형태(개인/모둠)를 표준 필드로 정규화합니다.
- **문항/활동 품질 태깅**: 우수 예시는 `quality:A+` 등급으로, 개선 필요 예시는 `quality:B` 등급으로 태깅해 학습/검색 가중치에 활용합니다.
- **개인정보/저작권 정리**: 학생 이름, 사진 캡션, 외부 문제 인용 시 출처 표기를 정비하거나 비공개 필드로 분리합니다.

## 3. 적합성 검증 및 릴리즈 체크리스트
- **샘플 블라인드 검수**: 랜덤 샘플(≥5%)을 추출해 원문 대비 정확도, 라벨링 일관성, 수식/기호 보존 여부를 점검합니다.
- **메타데이터 스키마 검증**: JSON 스키마 검증으로 필수 필드(출처, 발행연도, 라이선스, 품질 등급)가 모두 채워졌는지 확인합니다.
- **금칙어/민감 정보 검사**: 금칙어 목록과 PII 탐지 룰을 적용해 노출 위험을 제거합니다.
- **버전 관리**: 데이터셋 릴리즈마다 버전(`vYYYY.MM.DD`)을 부여하고 변경 로그(추가/삭제/수정 건수, 주요 이슈)를 남깁니다.

[^encoding]: 한글, 수식, 기호 손실을 방지하기 위해 OCR/파싱 단계부터 UTF-8과 수식 라텍스 표현을 우선 적용합니다.
[^privacy]: 개인정보보호법 및 학생·교원 보호 원칙을 준수하기 위해 PII를 익명화하거나 비공개 필드로 분리합니다.
[^copyright]: 교육 자료의 저작권을 침해하지 않도록 라이선스 범위와 인용 규칙을 명시하고, 필요 시 비공개 저장소에 한정합니다.
